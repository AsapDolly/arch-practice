#### ID: ADR-001

#### Дата: 08.10.2023

#### Статус: принято

#### Участники:
- Имеков Даши

#### Решения:
- на вход поставить балансировщик нагрузки
- на выход шлюз сообщение с очередями

#### Контекст:
В текущей архитектуре у нас есть мобильное приложение, которое общается с компонентом "Controller", а он в свою очередь делает запросы к "Foo" и "Bar". Необходимо сделать более универсальную систему, которая на вход будет получать сообщения от разных подсистем и на выход отправлять клиентам по разным каналам связи. После анализа было решено в качестве входной точки поставить балансировщик нагрузки и для отправки сообщений сделать общий шлюз, который будет отправлять в нужную очередь в зависимости от типа сообщений.

#### Аргументация:

Я выбрал RabbitMQ, потому что:
- Он хорошо интегрируется с нашим текущим стеком технологий.
- Поддерживает публикацию/подписку и точку-точку коммуникацию.
- Обладает мощными механизмами маршрутизации сообщений.
- Имеет активное сообщество и хорошую документацию.

Выбрал Postgres, потому что

- **Открытое и бесплатное ПО**
- **Надежность и стабильность** 
- **Мощные возможности SQL** 
- **Поддержка расширений и пользовательских функций:** Вы можете создавать пользовательские функции и расширения для PostgreSQL, что позволяет адаптировать СУБД под конкретные требования вашего проекта.
- **Геоданные и JSON:** PostgreSQL предоставляет поддержку для геоданных и JSON-типов данных, что полезно в приложениях, работающих с географическими данными и JSON API.
- **Сообщество и поддержка:** PostgreSQL имеет активное сообщество пользователей и разработчиков, что обеспечивает доступ к обширной документации, форумам и ресурсам поддержки.
- **Расширяемость:** PostgreSQL легко масштабируется и поддерживает партиционирование и репликацию данных для обработки больших объемов информации.
- **Безопасность:** PostgreSQL предоставляет множество функций безопасности, включая авторизацию, шифрование данных и механизмы аудита.
- **Интеграция с другими языками и фреймворками:** PostgreSQL интегрируется хорошо с различными языками программирования и фреймворками, что упрощает разработку приложений.
- **Поддержка ACID-транзакций:** PostgreSQL строго соблюдает стандарты ACID (Atomicity, Consistency, Isolation, Durability), что обеспечивает надежность данных и целостность транзакций.
- **Развитая экосистема инструментов:** С PostgreSQL поставляется множество инструментов и клиентских приложений, которые облегчают управление и мониторинг базы данных.
- **Индексация и оптимизация запросов:** PostgreSQL предоставляет широкий выбор типов индексов и оптимизатор запросов, что позволяет ускорить выполнение запросов.
- **Поддержка различных ОС:** PostgreSQL поддерживает различные операционные системы, включая Linux, Windows и macOS.
- **Соответствие стандартам SQL:** PostgreSQL придерживается стандартов SQL, что упрощает миграцию с других СУБД и разработку переносимого кода.

#### Последствия:

#### Положительные:
* единый интерфейс входа 
* балансировка нагрузки
* возможность обработки ошибок отправки в шлюзе
* повышение надёжности отправки за счёт очередей сообщений
* выбор RabbitMQ позволит нам управлять асинхронными задачами и обменом сообщениями более эффективно. 
#### Отрицательные:
* потребуются дополнительные разработчики с навыками работы с балансировщиками и очередями сообщений
* дополнительное логирование и мониторинг новых подсистем
* необходимо создать систему аутентификации для всех подсистем, продумать уровни ролей и доступных действий